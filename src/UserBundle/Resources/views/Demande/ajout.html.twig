{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_4_layout.html.twig' %}

{% block stylesheets %}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/css/bootstrap-datepicker.css">
    <link  rel="stylesheet" href="{{ asset('dist/css/bootstrap-datepicker.standalone.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet/1/leaflet.css" />
    <script>
        jQuery(document).ready(function() {
            $('.js-datepicker').datepicker();
        });
    </script>

{% endblock %}

{% block body %}
    {% for message in app.flashes('success') %}
        <div class="flash-notice">
            {{ message }}
        </div>
    {% endfor %}

    {% for item in app.session.flashbag.get("form_error") %}
        <div class="alert alert-danger fadeOut ">
            <p>{{item}}</p>
        </div>
    {% endfor %}

    <link rel="stylesheet" href="{{asset('css/search.css')}}">

    <script src="{{ asset('js/leaflet.js') }}"></script>

    <div class="container form-ajout  w-50" >
        <div class="row" >
            <div class="col-lg-12 col-md-6 col-lg-offset-3 col-md-offset-3 col-sm-12 col-xs-12" >
                <div class="title mt-4">
                    <h1 style="text-align:center ; color:#e80d36">  Ajout d'une nouvelle demande</h1>
                </div>

                {{form_start(form)}}
                {{form_widget(form)}}

                <div class="form-group">
                    <label class="col-form-label" for="inputDefault">Adresse</label>
                    <input name="lieu" type="search" id="address" class="form-control" placeholder="Lieu de l'évènement à sponsoriser" />
                </div>


                <p>Selected: <strong id="address-value">none</strong></p>
                <script src="https://cdn.jsdelivr.net/npm/places.js@1.16.3"></script>
                <script>
                    (function() {
                        var placesAutocomplete = places({
                            appId: 'plWZT7SVWEWC',
                            apiKey: '71baa5bff421b2cabec711500fb2ca53',
                            container: document.querySelector('#address')
                        });

                        var $address = document.querySelector('#address-value')
                        placesAutocomplete.on('change', function(e) {
                            $address.textContent = e.suggestion.value
                        });

                        placesAutocomplete.on('clear', function() {
                            $address.textContent = 'none';
                        });

                    })();
                </script>

                <div class="mx-auto mb-5" style="width: 200px;">
                    <button type="submit" class="btn custom-butt-2 w-75 button large">Ajouter</button>
                </div>
                {{form_widget(form.imageFile)}}
                {{form_end(form)}}

                <nav aria-label="navigation">
                    <ul class="pager">
                        <li class="previous"><a href="{{ path('user_homepage') }}" title="Précédent">Précédent</a></li>
                    </ul>
                </nav>

            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
{{parent()}}
<script src="{{asset('SC/addDemande.js')}}"> </script>
{% endblock %}